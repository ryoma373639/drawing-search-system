# 図面検索システム

Dropbox Business連携の図面検索システム。CAD図面、PDF、画像ファイルから自動でテキストを抽出し、高速に検索できます。

## 特徴

- **全文検索**: 図版番号、品名、部品名、施主名から高速検索
- **自動インデックス**: Dropboxフォルダを監視し、新規・更新ファイルを自動で取り込み
- **OCR対応**: PDF・画像内のテキストを自動抽出
- **CAD対応**: DXFファイルのテキスト解析
- **シンプルUI**: ITリテラシーが低くても使いやすい設計
- **完全ローカル**: データは全てPC内で処理（外部送信なし）
- **コスト0円**: サーバー不要、無料で利用可能

## 対応ファイル形式

- **CAD図面**: .dwg, .dxf
- **PDF**: .pdf
- **画像**: .jpg, .jpeg, .png, .tiff, .tif

## システム要件

- **OS**: Windows 10 / 11
- **メモリ**: 4GB以上推奨
- **ストレージ**: 500MB以上の空き容量
- **Dropbox**: Dropbox Businessの共有フォルダ

## インストール

### 方法1: ビルド済みインストーラー（推奨）

1. `dist/図面検索システム Setup X.X.X.exe` を実行
2. インストーラーの指示に従ってインストール
3. デスクトップのショートカットから起動

### 方法2: ソースからビルド

#### 事前準備

1. Node.js v20以上をインストール
   - https://nodejs.org/

2. 必要な依存関係をインストール
   ```bash
   cd drawing-search-system
   npm install
   ```

#### 開発モードで起動

```bash
npm start
```

#### Windows版インストーラーをビルド

```bash
npm run build:win
```

ビルド後、`dist/` フォルダに `.exe` ファイルが生成されます。

## 使い方

### 初回セットアップ

1. アプリを起動
2. 「設定」ボタンをクリック
3. 「フォルダを選択」でDropboxの図面フォルダを選択
4. 自動的にインデックス作成が開始されます（10,000枚で約30分〜1時間）

### 検索方法

#### 基本検索

検索ボックスに以下のいずれかを入力:

- **図版番号**: `A-001`, `B-123`
- **品名**: `配管`, `平面図`, `立面図`
- **部品名**: `ボルト`, `配管継手`
- **施主名**: `ABC株式会社`, `田中商事`

#### 複合検索

複数のキーワードをスペースで区切って検索:

```
ABC 配管
```
→ 「ABC」と「配管」の両方を含む図面を検索

### ファイルを開く

検索結果のアイテムをクリック、または「📄 開く」ボタンをクリックすると、デフォルトアプリで図面が開きます。

- **PDF**: Adobe Reader等
- **CAD**: AutoCAD、DraftSight等
- **画像**: フォト、ペイント等

### フォルダを開く

「📁 フォルダを開く」ボタンで、図面が保存されているフォルダをエクスプローラーで開きます。

## 設定

### 再インデックス

図面を大量に追加・削除した場合や、検索結果がおかしい場合:

1. 「設定」を開く
2. 「🔄 再インデックス」をクリック
3. 確認ダイアログで「OK」

## トラブルシューティング

### 検索結果が表示されない

**原因1**: インデックスがまだ作成されていない
- **対処法**: 初回起動後、インデックス作成が完了するまで待つ（進捗バーで確認）

**原因2**: Dropboxフォルダのパスが正しくない
- **対処法**: 設定で正しいフォルダを再選択

**原因3**: ファイル名に検索キーワードが含まれていない、かつOCRが失敗している
- **対処法**: ファイル名の命名規則を確認

### ファイルが開かない

**原因**: デフォルトアプリが設定されていない
- **対処法**: Windowsでファイルタイプに対応するアプリを設定

### インデックス作成が遅い

**原因**: 大量のファイルがある、またはOCR処理に時間がかかっている
- **対処法**: 正常な動作です。バックグラウンドで実行されるため、他の作業を続けられます

### OCRの精度が低い

**原因**: 画像の解像度が低い、または手書き文字が多い
- **対処法**: 可能であれば高解像度でスキャン。手書き文字の認識率は低いため、ファイル名に情報を含めることを推奨

## ファイル名の命名規則（推奨）

検索精度を高めるため、以下の命名規則を推奨します:

### 現在の規則（対応済み）
```
図版番号_品名.拡張子

例:
A-001_配管.dwg
B-123_平面図.pdf
C-456_立面図.jpg
```

### より詳細な規則（推奨）
```
図版番号_品名_施主名_作成日.拡張子

例:
A-001_配管_ABC株式会社_20241201.dwg
B-123_平面図_田中商事_20241215.pdf
```

この命名規則により、ファイル名だけで検索可能になり、OCR不要で高速検索できます。

## データの保存場所

- **インデックスDB**: `C:\Users\[ユーザー名]\AppData\Roaming\drawing-search-system\drawings.db`
- **設定**: 上記DBに保存

## セキュリティ

- **完全ローカル処理**: 図面データは一切外部に送信されません
- **外部API不使用**: OCR・検索は全てPC内で実行
- **Dropbox読み取りのみ**: Dropboxからファイルを読み取るのみ（書き込みなし）

## ライセンス

MIT License

## サポート

問題が発生した場合は、社内のIT担当者にお問い合わせください。

---

**開発**: [会社名]
**バージョン**: 1.0.0
**最終更新**: 2024-12-15
