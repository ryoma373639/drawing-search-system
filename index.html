<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>図面検索システム</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- ヘッダー -->
    <header class="header">
      <h1>📐 図面検索システム</h1>
      <button id="settingsBtn" class="btn-secondary">⚙️ 設定</button>
    </header>

    <!-- 検索バー -->
    <div class="search-container">
      <input
        type="text"
        id="searchInput"
        class="search-input"
        placeholder="図版番号、品名、部品名、施主名で検索..."
        autofocus
      />
      <button id="searchBtn" class="btn-primary">🔍 検索</button>
    </div>

    <!-- ステータスバー -->
    <div class="status-bar" id="statusBar">
      <span id="statusText">Dropboxフォルダを設定してください</span>
      <span id="statsText"></span>
    </div>

    <!-- インデックス進捗 -->
    <div class="progress-container" id="progressContainer" style="display: none;">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text" id="progressText">インデックス作成中...</div>
    </div>

    <!-- 検索結果 -->
    <div class="results-container">
      <div class="results-header">
        <h2 id="resultsTitle">検索結果</h2>
        <span id="resultsCount"></span>
      </div>

      <div id="resultsList" class="results-list">
        <!-- 検索結果がここに表示されます -->
      </div>

      <div id="noResults" class="no-results" style="display: none;">
        <p>検索結果がありません</p>
      </div>

      <div id="welcomeMessage" class="welcome-message">
        <h3>ようこそ！</h3>
        <p>まず「設定」からDropboxフォルダを設定してください。</p>
        <p>設定後、自動的に図面のインデックスが作成されます。</p>
      </div>
    </div>
  </div>

  <!-- 設定モーダル -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>設定</h2>
        <span class="close" id="closeModal">&times;</span>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Dropboxフォルダのパス:</label>
          <div class="input-group">
            <input type="text" id="dropboxPath" class="form-input" readonly />
            <button id="selectFolderBtn" class="btn-secondary">フォルダを選択</button>
          </div>
        </div>

        <div class="form-group">
          <label>インデックス状態:</label>
          <div class="stats-display">
            <p>登録済みファイル: <strong id="totalFiles">0</strong> 件</p>
            <p>最終更新: <strong id="lastIndexed">未実行</strong></p>
          </div>
        </div>

        <div class="form-group">
          <button id="reindexBtn" class="btn-warning">🔄 再インデックス</button>
          <p class="warning-text">⚠️ 再インデックスには時間がかかります（約30分〜1時間）</p>
        </div>
      </div>

      <div class="modal-footer">
        <button id="closeSettingsBtn" class="btn-primary">閉じる</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
